# 云计算笔记

## 一、云计算概述

### 1.云计算不是一个技术，云计算是一种服务模式，是一种商业模式

#### （1）传统的物理世界，如果需要部署业务,需要单独建机房、买服务器、交换机等设备,云计算就是用户只需要通过网络去使用云服务厂商的资源即可。(AWS·谷歌·…阿里·微软·华为·…····阿里云···华为云··电信云/腾讯云···移动云)。

#### （2）网络是云的基础！	2006年	AWS的ES2	2013年	阿里云（飞天系统）

#### （3）Vmware(workstation	Vspgere)	hyper-v）	存储	数据库	操作系统（Windows	Linux）	openstack	容器Docker	K8s	CICD	自动化	日志ELK	智能监控

### 2.ICT=IT+CT	information	techologcy	信息技术	communcation	~通信技术

#### （1）计算

#### （2）存储

#### （3）网络

### 3.算力

### 4.虚拟化解决方案	FusionCompute

### 5.生活中的云服务

#### （1）百度云盘	通过云计算的方式去使用存储资源	Saa

#### （2）网易云	备份等等

#### （3）政务云	交易系统	平台	软件

### 6.云计算的优势

#### （1）按需自助服务

##### 想要什么就去云端申请什么，不需要资源怎么来，只需要关心怎么付费的问题

##### 云计算被称为ITC行业的水电站，网络就是电线、水管

#### （2）广泛的网络接入

##### 只要能够访问互联网，就可以去使用云服务厂商的云端资源	--公有云

##### 组织内部搭建的私有云平台，只有公司内部能访问	--私有云

##### 算力卸载

#### （3）资源池化

##### 云计算和虚拟化没有绑定关系

##### 云计算可以没有虚拟化，但是没有虚拟化的云计算几乎没有用处

##### 资源池化就是将底层的物理资源形成一个大的资源池，用户只需要从资源池中申请自己想要的资源即可，对于普通用户来说，云上的资源几乎是无限的

#### （4）快速弹性伸缩

##### 物理IT架构无法满足业务伸缩的场景，只有虚拟化、云场景才可以实现资源伸缩的功能

#### （5）可计量服务

##### 对资源的使用情况进行监控和统计

##### 如果是公有云，那么按照公有云厂商的单价收费

##### 如果是私有云，是对资源进行统计的

##### 云操作系统：亚马逊的AWS	阿里的飞天系统	其他99%以上的云计算公司底层都是openstack（Zstack	cloudstark）

##### nova	计算	cindcr	块存储	swift	对象存储	ncutron	网络	kcystonc	身份鉴权	glance	镜像

##### heat	应用编排	ceoilmeter	监控计量	horizon	图形化服务

### 7.云计算部署模式

#### （1）公有云

#### （2）私有云

#### （3）行业云

##### 某一个行业内部使用的云平台

##### 医疗行业云

##### 教育云

##### 政务云

#### （4）混合云

##### 有些服务部署在公有云上，有些服务部署在私有云上

### 8.云计算的服务模式

#### （1）IaaS	基础架构及服务

##### 计算	存储

#### （2）PaaS	平台即服务

##### 容器技术	Docker	podman	containerd	

##### 一个容器就是一个程序及其依赖环境的一个打包，可以将该容器做成一个模板（镜像），只需要该镜像发出来的容器，就和发布者的业务状态一样，可以忽略底层系统的差异性

#### （3）SaaS	软件即服务

##### 百度网盘	网易云	人脸识别

### 9.云计算发展史

#### （1）云计算1.0

##### 是以虚拟化技术为主，提供资源的利用率

##### Hyper-v	XEN	KVM	VMware ESX

##### 有些时候，虚拟化平台被称为云平台？，是因为云计算1.0时代就是以虚拟化为主的

#### （2）云计算2.0

##### 基础设施云化，资源服务标准化，自动化

##### 云计算的核心就是openstack（zstack  cloudstack等等）云操作系统

##### 真正的云开始出现！

#### （3）云计算3.0

##### 以容器  k8s等为核心的云计算3.0时代。强调敏捷开发，持续交付，应用快速迭代的概念。

### 10.云计算的关键技术

#### (1)计算

##### scale  out  分布式路由  分布式虚拟网络  分布式存储  分布式计算

##### 集群技术  集群管理

##### scale  up  依赖于单节点的计算能力

##### 架构师：设计  优化  

#### (2)网络

##### 东西流量   计算机内部  数据中心之间的访问

##### 南北流量  跨路由器  访问互联网

#### (3)存储

##### 集中式存储  传统的集中式存储是一个专业设备

##### 分布式存储   是通过分布式存储软件将闲置淘汰的服务器做成大规模的存储池。

##### HCS  huawei  clous stack  之前的底层存储可以是集中式存储

##### 但是从HCS 8.X 开始，底层的存储时分布式存储（OceanStor  Pacific）

### 11.集群管理  群集/Cluster

#### (1)集群有更多的高级特性

#### (2)集群更加可靠，依赖的是集群软件的可用性。

### 12.虚拟化基础

#### (1)虚拟机不知道自己是一个虚拟机

#### (2)虚拟机需要通过一定的条件才可以发放

##### ①物理资源  host  os

##### ②虚拟化软件层

#### (3)虚拟化技术可以将一台服务器虚拟成多个主机，提高资源的利用率。

##### （KVM  Xen   Vmware等等）

#### (4)虚拟机本质上就是宿主机上的一个文件夹

### 13.虚拟化的发展史

#### (1)1964年，IBM开始尝试在大型机（曾经的服务器）上实现虚拟化。

#### (2)1972年，IBM在大型机上实现了虚拟化。

#### (3)1999年，Vmware在X86架构上实现了虚拟化。

#### (4)2002年，Xen出现。

#### (5)2006年，KVM在以色列诞生了  Kernel-based Virtual Machine

##### rhel  5.4开始支持Xen虚拟化和KVM虚拟化

##### rhel  6开始只支持KVM虚拟化

##### 目前绝大部分虚拟化、云场景，底层都是KVM虚拟化。

#### (6)2013年，Docker是容器引擎，提供更加轻量化的虚拟化技术。

### 14.虚拟化的分类

#### (1)宿主型  Vmware  workstation   Virtualbox

#### (2)裸金属型  Vmware  Vsphere   FusionCompute85

 

### 15.虚拟化的特点

#### (1)分区

#### (2)独立

#### (3)隔离

#### (4)封装

### 16.虚拟化的对象

#### (1)计算

##### ①CPU虚拟化

##### CPU指令集：CISC(复杂性指令集)  RISC（精简型指令集）

| 指令集架构 | CISC                      | RISC                                             |
| ---------- | ------------------------- | ------------------------------------------------ |
|            | X86架构(intel  amd)  闭源 | ARM架构   开源的Power架构（大型机 小型机）  闭源 |

##### 芯片：intel  酷睿  至强  奔腾 赛扬  80186  80286  80386

##### AMD

##### ARM架构：ARM是一家公司，靠IP知识授权赚钱。华为基于ARM架构设计了自己的服务器芯片：鲲鹏，是服务器芯片，鲲鹏服务器，鲲鹏生态。

##### 四川华鲲振宇，国产服务器。西南算王！

 

##### 64位操作系统？指的是地址总线的位数！数据总线宽度：CPU中运算器与存储器之间互联的内部总线根数，也是CPU一次读取的二进制位数，同时也说明了字长。

##### 64位操作系统指的是数据总线的宽度。

##### 32位操作系统？32位操作系统最多支持4G内存。

##### 64位的操作系统理论上可以支持N  G内存

 

##### 全虚拟化  VMM将所有的虚拟机指令进行翻译，开销大！  Vmware

##### 半虚拟化  虚拟机知道自己是一个虚拟机了   Xen

##### 无法去发放windows等闭源的虚拟机！

##### 硬件辅助（全）虚拟化  通过CPU硬件去支持的 intel  VT-X  AMD  AMD-V

##### BIOS中开启。计算机一般默认是开启了的！

##### 现在的虚拟化基本都是硬件辅助虚拟化，没有全虚拟化或者半虚拟化了！

 

##### 最开始的时候，计算机一颗CPU。

##### 之前一颗CPU一个核心，后来为了提高计算密度，一颗CPU多个核心。2个核心。

##### 一个核心会有多个线程   4个线程   2个核心一共8个线程

##### 进程：一段程序运行起来就是一个进程   一个进程需要消耗一个线程

##### 线程超分配:一个线程分时复用成2个线程使用。

##### 一个线程可以虚拟出一个vCPU

##### ②内存

##### ③IO虚拟化

##### 全虚拟化

##### 半虚拟化  Xen  特权虚拟机

##### 硬件辅助虚拟化  通过硬件支持的，性能好！

#### (2)存储

#### (3)网络

### 17.KVM与Xen虚拟化的区别

#### (1)Xen  Dom 0  Dom  U

#### (2)KVM  基于linnux机器的内核的虚拟机  内核？  

##### 操作系统=内核态+用户态

##### （全世界的linux的内核都是一样的，但是linux系统有很多版本，用户态不同的！）

##### windows是闭源的，内核态和用户态是不可以解绑的！

##### KVM之所以叫做基于内核的虚拟机，是因为KVM本身是一个Linux内核模块，当安装有Linux系统的物理机安装了这个模块后，就变成了Hypervisor，而且还不会影响原先在该Linux上运行的其它应用程序。

#### (3)KVM仅仅只能实现CPU和内存的虚拟化，不能实现其他资源的虚拟化。

#### (4)Qemu是一个完整虚拟化解决方案，自己就能实现CPU  内存  磁盘 网络  IO等虚拟化，但是CPU 内存虚拟化性能比较差，所以一般会将KVM和qemu一起来使用，组成KVM-Qemu架构。在这个架构中，KVM负责CPU  内存的虚拟化，其他的虚拟化由qemu来实现。

### 18.FusionCompute虚拟化解决方案

#### (1)FusionCompute=CNA+VRM  

#### (2)CNA  计算节点代理  VRM  虚拟资源管理

### 19.openstack  云计算  虚拟化之间的关系

#### (1)云计算是一种服务模式，不是一个技术，但是底层依赖网络  虚拟化  存储  数据库  安全   操作系统  等等具体的技术  openstack  容器  等等

#### (2)openstack不是云，是云操作系统的核心骨干。云操作系统有：AWS  飞天系统  openstack  cloudstack  Zstack（上海云轴）等，云操作系统可以将底层的资源对接上云端，不管是虚拟化资源还是物理化资源。

#### (3)虚拟化是一个技术，云的底层一般都是虚拟化。

### 20.服务器

#### (1)U  高度  1U=4.445cm   2U  4U   机架型服务器  一般的机架也是U为单位的  42U  48U  

#### (2)服务器没有显示屏 没有鼠标  没有键盘 如何初始化？准备显示屏插上服务器的VGA接口，插上鼠标和键盘，网线插在BMC接口，一端插在电脑上。

#### (3)服务器买回来之后，BMC接口的IP地址都是固定的（192.168.2.100）。将电脑的以太网卡的IP地址配置成和BMC同一个网段，通过电脑的游览器去访问服务器的默认的BMCI  IP地址。输入BMC默认的用户名和密码，去修改IP地址，修改完成之后，将网线拔掉，放在机架上。后期就可以通过公司的网络去远程访问该服务器了。

| ![img](http://www.kdocs.cn/api/v3/office/copy/UnlyZ05TUVAxaTZsWHBWVlE5Mkx6aExDYXhBdjNpZkFkVUZDVVdTNVlRWUhXcjU2MnhJcU02RWRBUWlwVlE2RkhaU0hvb3NYMGxqRUVjM25iMERKQXljd21xaHY2OGF2UWVTR1ZaQ1EvaG8ydEZzeEN3RmpWZTc5ZHZCbTVQZzJ1bm96SEdVKytTZWZFVWdCM2RjK1JsUk15TTZtcU0yRkZycXpDUFVuTUljZlhyZEt2NDNmb0hvSmM5aGJXZTJ5MVcxYUkwR0ZmUENtbTRYaG00WWlTTXFjbG90dHhUSHI1d28wckxEaUJyamhxckowUG1uMEkvenh5R3UzRVlwck9pK1lXSXV4N3RBPQ==/attach/object/55cd503d58777a06d9ae287677b557ed156d11ba?) | ![img](http://www.kdocs.cn/api/v3/office/copy/UnlyZ05TUVAxaTZsWHBWVlE5Mkx6aExDYXhBdjNpZkFkVUZDVVdTNVlRWUhXcjU2MnhJcU02RWRBUWlwVlE2RkhaU0hvb3NYMGxqRUVjM25iMERKQXljd21xaHY2OGF2UWVTR1ZaQ1EvaG8ydEZzeEN3RmpWZTc5ZHZCbTVQZzJ1bm96SEdVKytTZWZFVWdCM2RjK1JsUk15TTZtcU0yRkZycXpDUFVuTUljZlhyZEt2NDNmb0hvSmM5aGJXZTJ5MVcxYUkwR0ZmUENtbTRYaG00WWlTTXFjbG90dHhUSHI1d28wckxEaUJyamhxckowUG1uMEkvenh5R3UzRVlwck9pK1lXSXV4N3RBPQ==/attach/object/7cc009cb9f60cb0a41493bd2f4683c2fac25fe36?) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |

 

 

#### (4)如果服务器的IP地址或者BMC的用户名和密码忘记了？这个时候可以进入服务器的BIOS界面去修改。但是只能面对面去修改，在服务器重启的过程中，按特定的按键进入BIOS界面（BIOS密码默认式Admin@9000，BIOS的密码一定要保管好！）

#### (5)进入BIOS之后，找BMC设置，去查看BMC的IP地址和用户名，或者修改密码。保存退出即可。

#### (6)配置RAID。可以通过BMC界面图形化去做RAID1,也可以在BIOS界面去做RAID。

#### (7)如果说需要批量安装很多台服务器系统该怎么办？  PXE

### 21.部署FusionCompute

#### (1)安装CNA

#### (2)安装VRM  VRM可以部署在物理服务器上，也可以部署在虚拟机里面

##### ①CNA上可以发放虚拟机

##### ②VRM可以作为一台虚拟机在CNA上部署

##### ③VRM式用来管理CNA的，提供web UI界面的	

##### ④华为提供了安装工具，可以图形化部署VRM在CNA上。
